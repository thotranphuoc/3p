# üîê How to Set First Admin User

Since the User Management page requires admin access, you need to manually set the first admin user in Firestore.

---

## Method 1: Firebase Console (Recommended)

### Step 1: Login to your app
1. Open the app in browser
2. Login with your account (Google or Email/Password)
3. Note your **email address**

### Step 2: Open Firebase Console
1. Go to https://console.firebase.google.com
2. Select your project
3. Click **Firestore Database** in left menu

### Step 3: Find your user document
1. Click on `users` collection
2. Find the document with your UID (you can search by email in the list)
3. Click on the document

### Step 4: Edit the role field
1. Find the `role` field
2. Click the **edit** icon (pencil)
3. Change value from `member` to `admin`
4. Click **Update**

### Step 5: Verify
1. Refresh your app
2. You should now see **"User Management"** link in the navbar
3. Click it to access the admin page

---

## Method 2: Firestore Rules Console

If you know your UID, you can directly update:

1. Go to Firestore Console
2. Navigate to: `users/{your-uid}`
3. Set `role: "admin"`

---

## Method 3: Using Firebase CLI (Advanced)

If you have Firebase Admin SDK setup locally:

```javascript
const admin = require('firebase-admin');
admin.initializeApp();

const db = admin.firestore();

// Replace with your actual UID
const userUid = 'YOUR_USER_UID_HERE';

db.collection('users').doc(userUid).update({
  role: 'admin'
}).then(() => {
  console.log('User role updated to admin');
});
```

---

## Finding Your UID

### Option 1: Check Console Logs
1. Open browser DevTools (F12)
2. Go to Console tab
3. Look for logs like: `[AuthService] User profile loaded: {uid: "abc123..."}`

### Option 2: Check Firestore
1. Go to Firebase Console ‚Üí Firestore
2. Open `users` collection
3. Your document ID = your UID
4. Match by email field

### Option 3: Check Profile Page
1. Login to app
2. Go to Profile page
3. Check the UID field (under email)

---

## Roles Explained

| Role | Permissions | Use Case |
|------|-------------|----------|
| **admin** | Full access, can manage all users and change roles | System administrators |
| **manager** | Can manage projects and tasks | Project managers |
| **member** | Can view and edit assigned tasks | Regular team members |

---

## After Setting Admin

Once you have admin access, you can:

1. ‚úÖ Navigate to **User Management** (`/admin/users`)
2. ‚úÖ View all users in the system
3. ‚úÖ Search and filter users
4. ‚úÖ Change any user's role (except your own)
5. ‚úÖ See user statistics (total, admin, manager, member counts)
6. ‚úÖ See who has active timers

---

## Security Notes

‚ö†Ô∏è **Important**:
- Only grant admin role to trusted users
- Admins can change anyone's role (except their own)
- Admins can see all users in the system
- You cannot change your own role (prevents accidental lockout)

---

## Example: Set First Admin

**Scenario**: You just logged in with `john@example.com`

1. Login to app with `john@example.com`
2. Check browser console, see: `uid: "abc123xyz"`
3. Go to Firebase Console ‚Üí Firestore
4. Open `users` collection
5. Find document `abc123xyz`
6. Edit `role` field: `member` ‚Üí `admin`
7. Refresh app
8. ‚úÖ See "User Management" link in navbar
9. ‚úÖ Click to access admin page

---

## Troubleshooting

### "User Management" link not showing
- Check that `role` field is exactly `"admin"` (lowercase, no spaces)
- Refresh the page (Ctrl+R or Cmd+R)
- Logout and login again

### "Access denied" when clicking User Management
- Verify role is set to `admin` in Firestore
- Check browser console for auth errors
- Make sure you're logged in

### Can't find my user document
- Look for document where `email` field matches your login email
- Document ID (UID) is auto-generated by Firebase Auth
- All users should have a document in `users` collection after first login

---

## Next Steps

After setting up the first admin:

1. ‚úÖ Test User Management page
2. ‚úÖ Promote other users to manager/admin as needed
3. ‚úÖ Create more projects and assign members
4. ‚úÖ Continue with PWA configuration or Dark Mode

---

**Done!** üéâ You now have admin access to manage all users in the system.
